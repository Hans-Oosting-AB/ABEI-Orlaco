<?xml version="1.0" encoding="utf-8"?><jobs><instanceguid>d9025c07-3898-433f-88ee-c5899cf947e7</instanceguid><job><id>463</id><jobname>05.1 - NEW: ESE &gt; EG Sync - Debtors</jobname><disable>False</disable><emailbody /><emailmode>1</emailmode><emailsubject /><emailto>lennart.meeuse@stoneridge.com</emailto><remarks></remarks><schedulename /><schedulesettings>freq=1;timescale=hours;startat=16:33:22;beginat=06:10:51;endat=16:11:00;day1=-1;day2=-1;day3=-1;day4=-1;day5=-1;day6=0;day7=0;enabled=-1</schedulesettings><settings></settings><settingsxml><settings><schedule><allowmultipleprocessorinstances>false</allowmultipleprocessorinstances></schedule><general><maxjobstepactions>200</maxjobstepactions></general><jobparams /></settings></settingsxml><steps><step><id>2698</id><entity>-none-</entity><action>exec SQL</action><source>129</source><target>107</target><datasource>print '-- Sync %abeitargetdb% ------------------------------------------'</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>0</seqno><settings /><settingsxml /><stepname>-- Sync 400 ------------------------------------------</stepname></step><step><id>2689</id><entity>Account</entity><action>update</action><source>129</source><target>107</target><datasource>SELECT cg.cmp_wwn, 
        cpg.cmp_wwn as cmp_parent, 
        ctg.cnt_id, 
        d.*
FROM dbo._AB_vw_ESE_Sync_Debtors d WITH (NOLOCK)
    -- Division Debtors, only the ones connected to the division
    INNER JOIN dbo._AB_sy_ESE_DivisionDebtors dd WITH (NOLOCK)
        ON dd.Account = d.ESE_cmp_wwn
    -- Globe
    INNER JOIN [%abeitargetdb%].dbo.cicmpy cg WITH (NOLOCK)
        ON cg.cmp_code = d.ESE_cmp_code
    -- Parent in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicmpy cpg WITH (NOLOCK)
        ON cpg.cmp_code = d.ESE_cmp_code_parent
    -- Main Contact in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicntp ctg WITH (NOLOCK) 
        ON ctg.cmp_wwn = cg.cmp_wwn AND ctg.TextField5 = d.ESE_cnt_id
WHERE 1=1
    AND dd.Division = '%abeitargetdb%'
    AND cg.cmp_type = 'C' -- Debtors only, it is possible we are accidentally joining a creditor with cmp_code so use this as filter
    -- Status in Synergy is active, or status in Globe is not equal to Synergy status
    AND (d.cmp_status = 'A' OR cg.cmp_status != d.cmp_status )
    -- update modified and always update creditline, status and accountmanager
    AND (d.ESE_sysmodified &gt; cg.sysmodified 
          OR d.cmp_status != cg.cmp_status 
          OR d.creditline &lt;&gt; cg.creditline 
          OR d.changevatcode &lt;&gt; cg.changevatcode
          OR ISNULL(d.textfield13,'') &lt;&gt; ISNULL(cg.textfield13,'') collate database_default  -- incoterms
          or ISNULL(d.PaymentCondition,'') &lt;&gt; ISNULL(cg.PaymentCondition,'')
          or (d.DefaultSelCode IS NOT NULL AND ISNULL(d.DefaultSelCode,'') &lt;&gt; ISNULL(cg.DefaultSelCode,'')  collate database_default )
          or (d.cmp_acc_man != cg.cmp_acc_man)
         ) </datasource><contentbody></contentbody><mapping></mapping><disable>0</disable><remarks></remarks><replace></replace><seqno>10</seqno><settings>uniquekey=;retryunique=0;</settings><settingsxml><settings><general><gen_datasource_method>0</gen_datasource_method><target_override /><referencekey /><datacolumns><datacolumn><name>cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>cmp_parent</name><type>Guid</type></datacolumn><datacolumn><name>cnt_id</name><type>Guid</type></datacolumn><datacolumn><name>ESE_cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>ESE_cmp_code</name><type>String</type></datacolumn><datacolumn><name>ESE_cmp_wwn_parent</name><type>Guid</type></datacolumn><datacolumn><name>ESE_cmp_code_parent</name><type>String</type></datacolumn><datacolumn><name>cmp_name</name><type>String</type></datacolumn><datacolumn><name>cmp_fadd1</name><type>String</type></datacolumn><datacolumn><name>cmp_fadd2</name><type>String</type></datacolumn><datacolumn><name>cmp_fadd3</name><type>String</type></datacolumn><datacolumn><name>cmp_fpc</name><type>String</type></datacolumn><datacolumn><name>cmp_fcity</name><type>String</type></datacolumn><datacolumn><name>cmp_fcounty</name><type>String</type></datacolumn><datacolumn><name>StateCode</name><type>String</type></datacolumn><datacolumn><name>cmp_fctry</name><type>String</type></datacolumn><datacolumn><name>cmp_e_mail</name><type>String</type></datacolumn><datacolumn><name>cmp_web</name><type>String</type></datacolumn><datacolumn><name>cmp_fax</name><type>String</type></datacolumn><datacolumn><name>cmp_tel</name><type>String</type></datacolumn><datacolumn><name>sct_code</name><type>String</type></datacolumn><datacolumn><name>SubSector</name><type>String</type></datacolumn><datacolumn><name>siz_code</name><type>String</type></datacolumn><datacolumn><name>cmp_date_cust</name><type>DateTime</type></datacolumn><datacolumn><name>cmp_note</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>cmp_reseller</name><type>Guid</type></datacolumn><datacolumn><name>cmp_type</name><type>String</type></datacolumn><datacolumn><name>cmp_status</name><type>String</type></datacolumn><datacolumn><name>datefield1</name><type>DateTime</type></datacolumn><datacolumn><name>datefield2</name><type>DateTime</type></datacolumn><datacolumn><name>datefield3</name><type>DateTime</type></datacolumn><datacolumn><name>datefield4</name><type>DateTime</type></datacolumn><datacolumn><name>datefield5</name><type>DateTime</type></datacolumn><datacolumn><name>numberfield1</name><type>Double</type></datacolumn><datacolumn><name>numberfield2</name><type>Double</type></datacolumn><datacolumn><name>numberfield3</name><type>Double</type></datacolumn><datacolumn><name>numberfield4</name><type>Double</type></datacolumn><datacolumn><name>numberfield5</name><type>Double</type></datacolumn><datacolumn><name>YesNofield1</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield2</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield3</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield4</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield5</name><type>Byte</type></datacolumn><datacolumn><name>cmp_origin</name><type>String</type></datacolumn><datacolumn><name>ClassificationId</name><type>String</type></datacolumn><datacolumn><name>type_since</name><type>DateTime</type></datacolumn><datacolumn><name>status_since</name><type>DateTime</type></datacolumn><datacolumn><name>WebAccessSince</name><type>DateTime</type></datacolumn><datacolumn><name>ProcessedByBackgroundJob</name><type>Boolean</type></datacolumn><datacolumn><name>debnr</name><type>String</type></datacolumn><datacolumn><name>crdnr</name><type>String</type></datacolumn><datacolumn><name>debcode</name><type>String</type></datacolumn><datacolumn><name>crdcode</name><type>String</type></datacolumn><datacolumn><name>ASPServer</name><type>String</type></datacolumn><datacolumn><name>ASPDatabase</name><type>String</type></datacolumn><datacolumn><name>ASPWebServer</name><type>String</type></datacolumn><datacolumn><name>ASPWebSite</name><type>String</type></datacolumn><datacolumn><name>SearchCode</name><type>String</type></datacolumn><datacolumn><name>Telex</name><type>String</type></datacolumn><datacolumn><name>NoteID</name><type>Int32</type></datacolumn><datacolumn><name>Blocked</name><type>Byte</type></datacolumn><datacolumn><name>LayoutCode</name><type>String</type></datacolumn><datacolumn><name>Factoring</name><type>Byte</type></datacolumn><datacolumn><name>ISOCountry</name><type>String</type></datacolumn><datacolumn><name>LiableToPayVAT</name><type>Byte</type></datacolumn><datacolumn><name>BackOrders</name><type>Byte</type></datacolumn><datacolumn><name>AddressNumber</name><type>String</type></datacolumn><datacolumn><name>DeliveryAddress</name><type>String</type></datacolumn><datacolumn><name>RouteCode</name><type>String</type></datacolumn><datacolumn><name>InvoiceDiscount</name><type>Double</type></datacolumn><datacolumn><name>PaymentConditionSearchCode</name><type>String</type></datacolumn><datacolumn><name>SearchCodeGoods</name><type>String</type></datacolumn><datacolumn><name>ExpenseCode</name><type>String</type></datacolumn><datacolumn><name>Area</name><type>String</type></datacolumn><datacolumn><name>InvoiceLayout</name><type>String</type></datacolumn><datacolumn><name>Status</name><type>String</type></datacolumn><datacolumn><name>InvoiceThreshold</name><type>Double</type></datacolumn><datacolumn><name>Location</name><type>String</type></datacolumn><datacolumn><name>VATSource</name><type>String</type></datacolumn><datacolumn><name>CalculatePenaltyInterest</name><type>Byte</type></datacolumn><datacolumn><name>SendPenaltyInvoices</name><type>Byte</type></datacolumn><datacolumn><name>PaymentMethod</name><type>String</type></datacolumn><datacolumn><name>InvoiceDebtor</name><type>String</type></datacolumn><datacolumn><name>CreditLine</name><type>Double</type></datacolumn><datacolumn><name>VatNumber</name><type>String</type></datacolumn><datacolumn><name>PurchaseReceipt</name><type>String</type></datacolumn><datacolumn><name>JournalCode</name><type>String</type></datacolumn><datacolumn><name>PaymentCondition</name><type>String</type></datacolumn><datacolumn><name>CheckDate</name><type>DateTime</type></datacolumn><datacolumn><name>ChangeVatCode</name><type>Int32</type></datacolumn><datacolumn><name>IntrastatSystem</name><type>String</type></datacolumn><datacolumn><name>ChangeIntraStatSystem</name><type>Byte</type></datacolumn><datacolumn><name>TransActionA</name><type>String</type></datacolumn><datacolumn><name>ChangeTransActionA</name><type>Byte</type></datacolumn><datacolumn><name>TransActionB</name><type>String</type></datacolumn><datacolumn><name>ChangeTransActionB</name><type>Byte</type></datacolumn><datacolumn><name>DestinationCountry</name><type>String</type></datacolumn><datacolumn><name>ChangeDestinationCountry</name><type>Byte</type></datacolumn><datacolumn><name>Transport</name><type>String</type></datacolumn><datacolumn><name>ChangeTransport</name><type>Byte</type></datacolumn><datacolumn><name>CityOfLoadUnload</name><type>String</type></datacolumn><datacolumn><name>ChangeCityOfLoadUnload</name><type>Byte</type></datacolumn><datacolumn><name>DeliveryTerms</name><type>String</type></datacolumn><datacolumn><name>ChangeDeliveryTerms</name><type>Byte</type></datacolumn><datacolumn><name>TransShipment</name><type>String</type></datacolumn><datacolumn><name>ChangeTransShipment</name><type>Byte</type></datacolumn><datacolumn><name>TriangularCountry</name><type>String</type></datacolumn><datacolumn><name>ChangeTriangularCountry</name><type>Byte</type></datacolumn><datacolumn><name>IntRegion</name><type>String</type></datacolumn><datacolumn><name>ChangeIntRegion</name><type>Byte</type></datacolumn><datacolumn><name>Collect</name><type>String</type></datacolumn><datacolumn><name>PaymentDay1</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay2</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay3</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay4</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay5</name><type>Int16</type></datacolumn><datacolumn><name>FiscalCode</name><type>String</type></datacolumn><datacolumn><name>CreditCard</name><type>String</type></datacolumn><datacolumn><name>ExpiryDate</name><type>DateTime</type></datacolumn><datacolumn><name>VatLiability</name><type>String</type></datacolumn><datacolumn><name>Attention</name><type>Byte</type></datacolumn><datacolumn><name>Category</name><type>String</type></datacolumn><datacolumn><name>StatementAddress</name><type>String</type></datacolumn><datacolumn><name>DefaultSelCode</name><type>String</type></datacolumn><datacolumn><name>GroupPayments</name><type>String</type></datacolumn><datacolumn><name>BOELimitAmount</name><type>Double</type></datacolumn><datacolumn><name>BOEMaxAmount</name><type>Double</type></datacolumn><datacolumn><name>ChamberOfCommerce</name><type>String</type></datacolumn><datacolumn><name>DunsNumber</name><type>String</type></datacolumn><datacolumn><name>textfield1</name><type>String</type></datacolumn><datacolumn><name>textfield2</name><type>String</type></datacolumn><datacolumn><name>textfield3</name><type>String</type></datacolumn><datacolumn><name>textfield4</name><type>String</type></datacolumn><datacolumn><name>TextField6</name><type>String</type></datacolumn><datacolumn><name>TextField7</name><type>String</type></datacolumn><datacolumn><name>TextField8</name><type>String</type></datacolumn><datacolumn><name>TextField9</name><type>String</type></datacolumn><datacolumn><name>TextField10</name><type>String</type></datacolumn><datacolumn><name>TextField12</name><type>String</type></datacolumn><datacolumn><name>TextField13</name><type>String</type></datacolumn><datacolumn><name>TextField14</name><type>String</type></datacolumn><datacolumn><name>TextField16</name><type>String</type></datacolumn><datacolumn><name>TextField17</name><type>String</type></datacolumn><datacolumn><name>TextField18</name><type>String</type></datacolumn><datacolumn><name>TextField19</name><type>String</type></datacolumn><datacolumn><name>TextField20</name><type>String</type></datacolumn><datacolumn><name>TextField21</name><type>String</type></datacolumn><datacolumn><name>TextField22</name><type>String</type></datacolumn><datacolumn><name>TextField23</name><type>String</type></datacolumn><datacolumn><name>TextField24</name><type>String</type></datacolumn><datacolumn><name>TextField25</name><type>String</type></datacolumn><datacolumn><name>TextField26</name><type>String</type></datacolumn><datacolumn><name>TextField27</name><type>String</type></datacolumn><datacolumn><name>TextField28</name><type>String</type></datacolumn><datacolumn><name>TextField29</name><type>String</type></datacolumn><datacolumn><name>TextField30</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_id</name><type>Guid</type></datacolumn><datacolumn><name>cmp_rating</name><type>Int32</type></datacolumn><datacolumn><name>ESE_sysmodified</name><type>DateTime</type></datacolumn><datacolumn><name>datemodified</name><type>DateTime</type></datacolumn></datacolumns></general></settings></settingsxml><stepname>ESE -&gt; EG - Update</stepname></step><step><id>2690</id><entity>Account</entity><action>create</action><source>129</source><target>107</target><datasource>SELECT cpg.cmp_wwn as cmp_parent, ESE_cmp_code as cmp_code, d.*
FROM dbo._AB_vw_ESE_Sync_Debtors d WITH (NOLOCK)
    -- Division Debtors, only the ones connected to the division
    INNER JOIN dbo._AB_sy_ESE_DivisionDebtors dd WITH (NOLOCK)
        ON dd.Account = d.ESE_cmp_wwn
    -- Parent in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicmpy cpg WITH (NOLOCK)
        ON cpg.cmp_code = d.ESE_cmp_code_parent
WHERE 1=1
    AND dd.Division = '%abeitargetdb%' 
    -- Status in Synergy is active
    AND (d.cmp_status = 'A')
    AND NOT EXISTS (SELECT 1 FROM [%abeitargetdb%].dbo.cicmpy cg WITH (NOLOCK) WHERE cg.cmp_code = d.ESE_cmp_code)
    
    -- Exclude old created we don't want to see for now
    AND d.ESE_sysmodified &gt; '2020-01-01'</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>20</seqno><settings /><settingsxml /><stepname>ESE -&gt; EG - Create </stepname></step><step><id>2691</id><entity>Account</entity><action>update</action><source>129</source><target>107</target><datasource>SELECT 1 as notavailableyet</datasource><contentbody></contentbody><mapping></mapping><disable>1</disable><remarks></remarks><replace></replace><seqno>30</seqno><settings>uniquekey=;retryunique=0;</settings><settingsxml><settings><general><gen_datasource_method>2</gen_datasource_method><target_override /><referencekey /><datacolumns><datacolumn><name>cnt_id</name><type>Guid</type></datacolumn><datacolumn><name>cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>MainContact</name><type>Int32</type></datacolumn><datacolumn><name>cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>textfield5</name><type>String</type></datacolumn><datacolumn><name>ESE_cmp_code</name><type>String</type></datacolumn><datacolumn><name>cnt_f_name</name><type>String</type></datacolumn><datacolumn><name>cnt_l_name</name><type>String</type></datacolumn><datacolumn><name>cnt_m_name</name><type>String</type></datacolumn><datacolumn><name>FullName</name><type>String</type></datacolumn><datacolumn><name>Initials</name><type>String</type></datacolumn><datacolumn><name>Gender</name><type>String</type></datacolumn><datacolumn><name>predcode</name><type>String</type></datacolumn><datacolumn><name>cnt_job_desc</name><type>String</type></datacolumn><datacolumn><name>cnt_dept</name><type>String</type></datacolumn><datacolumn><name>taalcode</name><type>String</type></datacolumn><datacolumn><name>cnt_f_ext</name><type>String</type></datacolumn><datacolumn><name>cnt_f_fax</name><type>String</type></datacolumn><datacolumn><name>cnt_f_tel</name><type>String</type></datacolumn><datacolumn><name>cnt_f_mobile</name><type>String</type></datacolumn><datacolumn><name>cnt_email</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>ESE_active</name><type>Byte</type></datacolumn><datacolumn><name>WebAccess</name><type>Byte</type></datacolumn><datacolumn><name>datefield1</name><type>DateTime</type></datacolumn><datacolumn><name>datefield2</name><type>DateTime</type></datacolumn><datacolumn><name>datefield3</name><type>DateTime</type></datacolumn><datacolumn><name>datefield4</name><type>DateTime</type></datacolumn><datacolumn><name>datefield5</name><type>DateTime</type></datacolumn><datacolumn><name>numberfield1</name><type>Double</type></datacolumn><datacolumn><name>numberfield2</name><type>Double</type></datacolumn><datacolumn><name>numberfield3</name><type>Double</type></datacolumn><datacolumn><name>numberfield4</name><type>Double</type></datacolumn><datacolumn><name>numberfield5</name><type>Double</type></datacolumn><datacolumn><name>YesNoField1</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField2</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField3</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField4</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField5</name><type>Byte</type></datacolumn><datacolumn><name>textfield1</name><type>String</type></datacolumn><datacolumn><name>textfield2</name><type>String</type></datacolumn><datacolumn><name>textfield3</name><type>String</type></datacolumn><datacolumn><name>textfield4</name><type>String</type></datacolumn><datacolumn><name>cntp_Directory</name><type>String</type></datacolumn><datacolumn><name>ContactChange</name><type>Boolean</type></datacolumn><datacolumn><name>datemodified</name><type>DateTime</type></datacolumn></datacolumns></general></settings></settingsxml><stepname>ESE -&gt; EG - Diff </stepname></step><step><id>2774</id><entity>Account</entity><action>update</action><source>1</source><target>107</target><datasource>SELECT cmp_wwn, 'B' AS cmp_status, 

CONCAT(ISNULL(cmp_note, '') COLLATE database_default, CONVERT(text,('
[ABEI Synchronisation ' + CONVERT(varchar,GETDATE(),120) + ']
Blocked because division %abeitargetdb% not found in Synergy.'   ))) as cmp_note

from [%abeitargetdb%]..cicmpy with (NOLOCK) 
where cmp_type = 'C' AND cmp_status = 'A'  
and debnr not in (
    select debtor from [%abeisourcedb%]..DivisionDebtors with (NOLOCK) where division = %abeitargetdb% 
) </datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>40</seqno><settings /><settingsxml /><stepname>Block debtors without division</stepname></step><step><id>2699</id><entity>-none-</entity><action>exec SQL</action><source>129</source><target>126</target><datasource>print '-- Sync %abeitargetdb% ------------------------------------------'</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>100</seqno><settings /><settingsxml /><stepname>-- Sync 483 ------------------------------------------</stepname></step><step><id>2692</id><entity>Account</entity><action>update</action><source>129</source><target>126</target><datasource>SELECT cg.cmp_wwn, cpg.cmp_wwn as cmp_parent, ctg.cnt_id, d.*
FROM dbo._AB_vw_ESE_Sync_Debtors d WITH (NOLOCK)
    -- Division Debtors, only the ones connected to the division
    INNER JOIN dbo._AB_sy_ESE_DivisionDebtors dd WITH (NOLOCK)
        ON dd.Account = d.ESE_cmp_wwn
    -- Globe
    INNER JOIN [%abeitargetdb%].dbo.cicmpy cg WITH (NOLOCK)
        ON cg.cmp_code = d.ESE_cmp_code
    -- Parent in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicmpy cpg WITH (NOLOCK)
        ON cpg.cmp_code = d.ESE_cmp_code_parent
    -- Main Contact in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicntp ctg WITH (NOLOCK) 
        ON ctg.cmp_wwn = cg.cmp_wwn AND ctg.TextField5 = d.ESE_cnt_id
WHERE 1=1
    AND dd.Division = '%abeitargetdb%'
    AND cg.cmp_type = 'C' -- Debtors only, it is possible we are accidentally joining a creditor with cmp_code so use this as filter
    -- Status in Synergy is active, or status in Globe is not equal to Synergy status
    AND (d.cmp_status = 'A' OR cg.cmp_status != d.cmp_status )    
    -- update modified and always update creditline, status and accountmanager
        AND (d.ESE_sysmodified &gt; cg.sysmodified 
          OR d.cmp_status != cg.cmp_status 
          OR d.creditline &lt;&gt; cg.creditline
          OR d.changevatcode &lt;&gt; cg.changevatcode
          OR ISNULL(d.textfield13,'') &lt;&gt; ISNULL(cg.textfield13,'') collate database_default  -- incoterms
          or ISNULL(d.PaymentCondition,'') &lt;&gt; ISNULL(cg.PaymentCondition,'')
          or (d.DefaultSelCode IS NOT NULL AND ISNULL(d.DefaultSelCode,'') &lt;&gt; ISNULL(cg.DefaultSelCode,'')  collate database_default )
          or (d.cmp_acc_man != cg.cmp_acc_man)
          )</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>110</seqno><settings /><settingsxml /><stepname>ESE -&gt; EG - Update </stepname></step><step><id>2693</id><entity>Account</entity><action>create</action><source>129</source><target>126</target><datasource>SELECT cpg.cmp_wwn as cmp_parent, ESE_cmp_code as cmp_code, d.*
FROM dbo._AB_vw_ESE_Sync_Debtors d WITH (NOLOCK)
    -- Division Debtors, only the ones connected to the division
    INNER JOIN dbo._AB_sy_ESE_DivisionDebtors dd WITH (NOLOCK)
        ON dd.Account = d.ESE_cmp_wwn
    -- Parent in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicmpy cpg WITH (NOLOCK)
        ON cpg.cmp_code = d.ESE_cmp_code_parent
WHERE 1=1
    AND dd.Division = '%abeitargetdb%' 
    -- Status in Synergy is active
    AND (d.cmp_status = 'A')
    AND NOT EXISTS (SELECT 1 FROM [%abeitargetdb%].dbo.cicmpy cg WITH (NOLOCK) WHERE cg.cmp_code = d.ESE_cmp_code)
    
    -- Exclude old created we don't want to see for now
    AND d.ESE_sysmodified &gt; '2020-01-01'</datasource><contentbody></contentbody><mapping></mapping><disable>0</disable><remarks></remarks><replace></replace><seqno>120</seqno><settings>uniquekey=;retryunique=0;</settings><settingsxml><settings><general><gen_datasource_method>0</gen_datasource_method><target_override /><referencekey /><datacolumns><datacolumn><name>cmp_parent</name><type>Guid</type></datacolumn><datacolumn><name>cmp_code</name><type>String</type></datacolumn><datacolumn><name>ESE_cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>ESE_cmp_code</name><type>String</type></datacolumn><datacolumn><name>ESE_cmp_wwn_parent</name><type>Guid</type></datacolumn><datacolumn><name>ESE_cmp_code_parent</name><type>String</type></datacolumn><datacolumn><name>cmp_name</name><type>String</type></datacolumn><datacolumn><name>cmp_fadd1</name><type>String</type></datacolumn><datacolumn><name>cmp_fadd2</name><type>String</type></datacolumn><datacolumn><name>cmp_fadd3</name><type>String</type></datacolumn><datacolumn><name>cmp_fpc</name><type>String</type></datacolumn><datacolumn><name>cmp_fcity</name><type>String</type></datacolumn><datacolumn><name>cmp_fcounty</name><type>String</type></datacolumn><datacolumn><name>StateCode</name><type>String</type></datacolumn><datacolumn><name>cmp_fctry</name><type>String</type></datacolumn><datacolumn><name>cmp_e_mail</name><type>String</type></datacolumn><datacolumn><name>cmp_web</name><type>String</type></datacolumn><datacolumn><name>cmp_fax</name><type>String</type></datacolumn><datacolumn><name>cmp_tel</name><type>String</type></datacolumn><datacolumn><name>sct_code</name><type>String</type></datacolumn><datacolumn><name>SubSector</name><type>String</type></datacolumn><datacolumn><name>siz_code</name><type>String</type></datacolumn><datacolumn><name>cmp_date_cust</name><type>DateTime</type></datacolumn><datacolumn><name>cmp_note</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>cmp_reseller</name><type>Guid</type></datacolumn><datacolumn><name>cmp_type</name><type>String</type></datacolumn><datacolumn><name>cmp_status</name><type>String</type></datacolumn><datacolumn><name>datefield1</name><type>DateTime</type></datacolumn><datacolumn><name>datefield2</name><type>DateTime</type></datacolumn><datacolumn><name>datefield3</name><type>DateTime</type></datacolumn><datacolumn><name>datefield4</name><type>DateTime</type></datacolumn><datacolumn><name>datefield5</name><type>DateTime</type></datacolumn><datacolumn><name>numberfield1</name><type>Double</type></datacolumn><datacolumn><name>numberfield2</name><type>Double</type></datacolumn><datacolumn><name>numberfield3</name><type>Double</type></datacolumn><datacolumn><name>numberfield4</name><type>Double</type></datacolumn><datacolumn><name>numberfield5</name><type>Double</type></datacolumn><datacolumn><name>YesNofield1</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield2</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield3</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield4</name><type>Byte</type></datacolumn><datacolumn><name>YesNofield5</name><type>Byte</type></datacolumn><datacolumn><name>cmp_origin</name><type>String</type></datacolumn><datacolumn><name>ClassificationId</name><type>String</type></datacolumn><datacolumn><name>type_since</name><type>DateTime</type></datacolumn><datacolumn><name>status_since</name><type>DateTime</type></datacolumn><datacolumn><name>WebAccessSince</name><type>DateTime</type></datacolumn><datacolumn><name>ProcessedByBackgroundJob</name><type>Boolean</type></datacolumn><datacolumn><name>debnr</name><type>String</type></datacolumn><datacolumn><name>crdnr</name><type>String</type></datacolumn><datacolumn><name>debcode</name><type>String</type></datacolumn><datacolumn><name>crdcode</name><type>String</type></datacolumn><datacolumn><name>ASPServer</name><type>String</type></datacolumn><datacolumn><name>ASPDatabase</name><type>String</type></datacolumn><datacolumn><name>ASPWebServer</name><type>String</type></datacolumn><datacolumn><name>ASPWebSite</name><type>String</type></datacolumn><datacolumn><name>SearchCode</name><type>String</type></datacolumn><datacolumn><name>Telex</name><type>String</type></datacolumn><datacolumn><name>NoteID</name><type>Int32</type></datacolumn><datacolumn><name>Blocked</name><type>Byte</type></datacolumn><datacolumn><name>LayoutCode</name><type>String</type></datacolumn><datacolumn><name>Factoring</name><type>Byte</type></datacolumn><datacolumn><name>ISOCountry</name><type>String</type></datacolumn><datacolumn><name>LiableToPayVAT</name><type>Byte</type></datacolumn><datacolumn><name>BackOrders</name><type>Byte</type></datacolumn><datacolumn><name>AddressNumber</name><type>String</type></datacolumn><datacolumn><name>DeliveryAddress</name><type>String</type></datacolumn><datacolumn><name>RouteCode</name><type>String</type></datacolumn><datacolumn><name>InvoiceDiscount</name><type>Double</type></datacolumn><datacolumn><name>PaymentConditionSearchCode</name><type>String</type></datacolumn><datacolumn><name>SearchCodeGoods</name><type>String</type></datacolumn><datacolumn><name>ExpenseCode</name><type>String</type></datacolumn><datacolumn><name>Area</name><type>String</type></datacolumn><datacolumn><name>InvoiceLayout</name><type>String</type></datacolumn><datacolumn><name>Status</name><type>String</type></datacolumn><datacolumn><name>InvoiceThreshold</name><type>Double</type></datacolumn><datacolumn><name>Location</name><type>String</type></datacolumn><datacolumn><name>VATSource</name><type>String</type></datacolumn><datacolumn><name>CalculatePenaltyInterest</name><type>Byte</type></datacolumn><datacolumn><name>SendPenaltyInvoices</name><type>Byte</type></datacolumn><datacolumn><name>PaymentMethod</name><type>String</type></datacolumn><datacolumn><name>InvoiceDebtor</name><type>String</type></datacolumn><datacolumn><name>CreditLine</name><type>Double</type></datacolumn><datacolumn><name>VatNumber</name><type>String</type></datacolumn><datacolumn><name>PurchaseReceipt</name><type>String</type></datacolumn><datacolumn><name>JournalCode</name><type>String</type></datacolumn><datacolumn><name>PaymentCondition</name><type>String</type></datacolumn><datacolumn><name>CheckDate</name><type>DateTime</type></datacolumn><datacolumn><name>ChangeVatCode</name><type>Int32</type></datacolumn><datacolumn><name>IntrastatSystem</name><type>String</type></datacolumn><datacolumn><name>ChangeIntraStatSystem</name><type>Byte</type></datacolumn><datacolumn><name>TransActionA</name><type>String</type></datacolumn><datacolumn><name>ChangeTransActionA</name><type>Byte</type></datacolumn><datacolumn><name>TransActionB</name><type>String</type></datacolumn><datacolumn><name>ChangeTransActionB</name><type>Byte</type></datacolumn><datacolumn><name>DestinationCountry</name><type>String</type></datacolumn><datacolumn><name>ChangeDestinationCountry</name><type>Byte</type></datacolumn><datacolumn><name>Transport</name><type>String</type></datacolumn><datacolumn><name>ChangeTransport</name><type>Byte</type></datacolumn><datacolumn><name>CityOfLoadUnload</name><type>String</type></datacolumn><datacolumn><name>ChangeCityOfLoadUnload</name><type>Byte</type></datacolumn><datacolumn><name>DeliveryTerms</name><type>String</type></datacolumn><datacolumn><name>ChangeDeliveryTerms</name><type>Byte</type></datacolumn><datacolumn><name>TransShipment</name><type>String</type></datacolumn><datacolumn><name>ChangeTransShipment</name><type>Byte</type></datacolumn><datacolumn><name>TriangularCountry</name><type>String</type></datacolumn><datacolumn><name>ChangeTriangularCountry</name><type>Byte</type></datacolumn><datacolumn><name>IntRegion</name><type>String</type></datacolumn><datacolumn><name>ChangeIntRegion</name><type>Byte</type></datacolumn><datacolumn><name>Collect</name><type>String</type></datacolumn><datacolumn><name>PaymentDay1</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay2</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay3</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay4</name><type>Int16</type></datacolumn><datacolumn><name>PaymentDay5</name><type>Int16</type></datacolumn><datacolumn><name>FiscalCode</name><type>String</type></datacolumn><datacolumn><name>CreditCard</name><type>String</type></datacolumn><datacolumn><name>ExpiryDate</name><type>DateTime</type></datacolumn><datacolumn><name>VatLiability</name><type>String</type></datacolumn><datacolumn><name>Attention</name><type>Byte</type></datacolumn><datacolumn><name>Category</name><type>String</type></datacolumn><datacolumn><name>StatementAddress</name><type>String</type></datacolumn><datacolumn><name>DefaultSelCode</name><type>String</type></datacolumn><datacolumn><name>GroupPayments</name><type>String</type></datacolumn><datacolumn><name>BOELimitAmount</name><type>Double</type></datacolumn><datacolumn><name>BOEMaxAmount</name><type>Double</type></datacolumn><datacolumn><name>ChamberOfCommerce</name><type>String</type></datacolumn><datacolumn><name>DunsNumber</name><type>String</type></datacolumn><datacolumn><name>textfield1</name><type>String</type></datacolumn><datacolumn><name>textfield2</name><type>String</type></datacolumn><datacolumn><name>textfield3</name><type>String</type></datacolumn><datacolumn><name>textfield4</name><type>String</type></datacolumn><datacolumn><name>TextField6</name><type>String</type></datacolumn><datacolumn><name>TextField7</name><type>String</type></datacolumn><datacolumn><name>TextField8</name><type>String</type></datacolumn><datacolumn><name>TextField9</name><type>String</type></datacolumn><datacolumn><name>TextField10</name><type>String</type></datacolumn><datacolumn><name>TextField12</name><type>String</type></datacolumn><datacolumn><name>TextField13</name><type>String</type></datacolumn><datacolumn><name>TextField14</name><type>String</type></datacolumn><datacolumn><name>TextField16</name><type>String</type></datacolumn><datacolumn><name>TextField17</name><type>String</type></datacolumn><datacolumn><name>TextField18</name><type>String</type></datacolumn><datacolumn><name>TextField19</name><type>String</type></datacolumn><datacolumn><name>TextField20</name><type>String</type></datacolumn><datacolumn><name>TextField21</name><type>String</type></datacolumn><datacolumn><name>TextField22</name><type>String</type></datacolumn><datacolumn><name>TextField23</name><type>String</type></datacolumn><datacolumn><name>TextField24</name><type>String</type></datacolumn><datacolumn><name>TextField25</name><type>String</type></datacolumn><datacolumn><name>TextField26</name><type>String</type></datacolumn><datacolumn><name>TextField27</name><type>String</type></datacolumn><datacolumn><name>TextField28</name><type>String</type></datacolumn><datacolumn><name>TextField29</name><type>String</type></datacolumn><datacolumn><name>TextField30</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_id</name><type>Guid</type></datacolumn><datacolumn><name>cmp_rating</name><type>Int32</type></datacolumn><datacolumn><name>ESE_sysmodified</name><type>DateTime</type></datacolumn><datacolumn><name>datemodified</name><type>DateTime</type></datacolumn></datacolumns></general></settings></settingsxml><stepname>ESE -&gt; EG - Create</stepname></step><step><id>2694</id><entity>Account</entity><action>update</action><source>129</source><target>126</target><datasource>SELECT 1 as notavailableyet</datasource><contentbody></contentbody><mapping></mapping><disable>1</disable><remarks></remarks><replace></replace><seqno>130</seqno><settings>uniquekey=;retryunique=0;</settings><settingsxml><settings><general><gen_datasource_method>2</gen_datasource_method><target_override /><referencekey /><datacolumns><datacolumn><name>cnt_id</name><type>Guid</type></datacolumn><datacolumn><name>cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>MainContact</name><type>Int32</type></datacolumn><datacolumn><name>cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>textfield5</name><type>String</type></datacolumn><datacolumn><name>ESE_cmp_code</name><type>String</type></datacolumn><datacolumn><name>cnt_f_name</name><type>String</type></datacolumn><datacolumn><name>cnt_l_name</name><type>String</type></datacolumn><datacolumn><name>cnt_m_name</name><type>String</type></datacolumn><datacolumn><name>FullName</name><type>String</type></datacolumn><datacolumn><name>Initials</name><type>String</type></datacolumn><datacolumn><name>Gender</name><type>String</type></datacolumn><datacolumn><name>predcode</name><type>String</type></datacolumn><datacolumn><name>cnt_job_desc</name><type>String</type></datacolumn><datacolumn><name>cnt_dept</name><type>String</type></datacolumn><datacolumn><name>taalcode</name><type>String</type></datacolumn><datacolumn><name>cnt_f_ext</name><type>String</type></datacolumn><datacolumn><name>cnt_f_fax</name><type>String</type></datacolumn><datacolumn><name>cnt_f_tel</name><type>String</type></datacolumn><datacolumn><name>cnt_f_mobile</name><type>String</type></datacolumn><datacolumn><name>cnt_email</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>ESE_active</name><type>Byte</type></datacolumn><datacolumn><name>WebAccess</name><type>Byte</type></datacolumn><datacolumn><name>datefield1</name><type>DateTime</type></datacolumn><datacolumn><name>datefield2</name><type>DateTime</type></datacolumn><datacolumn><name>datefield3</name><type>DateTime</type></datacolumn><datacolumn><name>datefield4</name><type>DateTime</type></datacolumn><datacolumn><name>datefield5</name><type>DateTime</type></datacolumn><datacolumn><name>numberfield1</name><type>Double</type></datacolumn><datacolumn><name>numberfield2</name><type>Double</type></datacolumn><datacolumn><name>numberfield3</name><type>Double</type></datacolumn><datacolumn><name>numberfield4</name><type>Double</type></datacolumn><datacolumn><name>numberfield5</name><type>Double</type></datacolumn><datacolumn><name>YesNoField1</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField2</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField3</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField4</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField5</name><type>Byte</type></datacolumn><datacolumn><name>textfield1</name><type>String</type></datacolumn><datacolumn><name>textfield2</name><type>String</type></datacolumn><datacolumn><name>textfield3</name><type>String</type></datacolumn><datacolumn><name>textfield4</name><type>String</type></datacolumn><datacolumn><name>cntp_Directory</name><type>String</type></datacolumn><datacolumn><name>ContactChange</name><type>Boolean</type></datacolumn><datacolumn><name>datemodified</name><type>DateTime</type></datacolumn></datacolumns></general></settings></settingsxml><stepname>ESE -&gt; EG - Diff </stepname></step><step><id>2781</id><entity>Account</entity><action>update</action><source>1</source><target>127</target><datasource>SELECT cmp_wwn, 'B' AS cmp_status, 

CONCAT(ISNULL(cmp_note, '') COLLATE database_default, CONVERT(text,('
[ABEI Synchronisation ' + CONVERT(varchar,GETDATE(),120) + ']
Blocked because division %abeitargetdb% not found in Synergy.'   ))) as cmp_note

from [%abeitargetdb%]..cicmpy with (NOLOCK) 
where cmp_type = 'C' AND cmp_status = 'A'  
and debnr not in (
    select debtor from [%abeisourcedb%]..DivisionDebtors with (NOLOCK) where division = %abeitargetdb% 
) </datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>140</seqno><settings /><settingsxml /><stepname>Block debtors without division</stepname></step><step><id>2700</id><entity>-none-</entity><action>exec SQL</action><source>129</source><target>112</target><datasource>print '-- Sync %abeitargetdb% ------------------------------------------'</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>200</seqno><settings /><settingsxml /><stepname>-- Sync 484 ------------------------------------------</stepname></step><step><id>2695</id><entity>Account</entity><action>update</action><source>129</source><target>112</target><datasource>SELECT cg.cmp_wwn, cpg.cmp_wwn as cmp_parent, ctg.cnt_id, d.*
FROM dbo._AB_vw_ESE_Sync_Debtors d WITH (NOLOCK)
    -- Division Debtors, only the ones connected to the division
    INNER JOIN dbo._AB_sy_ESE_DivisionDebtors dd WITH (NOLOCK)
        ON dd.Account = d.ESE_cmp_wwn
    -- Globe
    INNER JOIN [%abeitargetdb%].dbo.cicmpy cg WITH (NOLOCK)
        ON cg.cmp_code = d.ESE_cmp_code
    -- Parent in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicmpy cpg WITH (NOLOCK)
        ON cpg.cmp_code = d.ESE_cmp_code_parent
    -- Main Contact in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicntp ctg WITH (NOLOCK) 
        ON ctg.cmp_wwn = cg.cmp_wwn AND ctg.TextField5 = d.ESE_cnt_id
WHERE 1=1
    AND dd.Division = '%abeitargetdb%'
    AND cg.cmp_type = 'C' -- Debtors only, it is possible we are accidentally joining a creditor with cmp_code so use this as filter
    -- Status in Synergy is active, or status in Globe is not equal to Synergy status
    AND (d.cmp_status = 'A' OR cg.cmp_status != d.cmp_status )    
    -- update modified and always update creditline, status and accountmanager
    AND (d.ESE_sysmodified &gt; cg.sysmodified 
          OR d.cmp_status != cg.cmp_status 
          OR d.creditline &lt;&gt; cg.creditline 
          OR d.changevatcode &lt;&gt; cg.changevatcode
          OR ISNULL(d.textfield13,'') &lt;&gt; ISNULL(cg.textfield13,'') collate database_default  -- incoterms
          or ISNULL(d.PaymentCondition,'') &lt;&gt; ISNULL(cg.PaymentCondition,'')
          or (d.DefaultSelCode IS NOT NULL AND ISNULL(d.DefaultSelCode,'') &lt;&gt; ISNULL(cg.DefaultSelCode,'')  collate database_default )
          or (d.cmp_acc_man != cg.cmp_acc_man)
          )</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>210</seqno><settings /><settingsxml /><stepname>ESE -&gt; EG - Update </stepname></step><step><id>2696</id><entity>Account</entity><action>create</action><source>129</source><target>112</target><datasource>SELECT cpg.cmp_wwn as cmp_parent, ESE_cmp_code as cmp_code, d.*
FROM dbo._AB_vw_ESE_Sync_Debtors d WITH (NOLOCK)
    -- Division Debtors, only the ones connected to the division
    INNER JOIN dbo._AB_sy_ESE_DivisionDebtors dd WITH (NOLOCK)
        ON dd.Account = d.ESE_cmp_wwn
    -- Parent in Globe
    LEFT JOIN [%abeitargetdb%].dbo.cicmpy cpg WITH (NOLOCK)
        ON cpg.cmp_code = d.ESE_cmp_code_parent
WHERE 1=1
    AND dd.Division = '%abeitargetdb%' 
    -- Status in Synergy is active
    AND (d.cmp_status = 'A')
    AND NOT EXISTS (SELECT 1 FROM [%abeitargetdb%].dbo.cicmpy cg WITH (NOLOCK) WHERE cg.cmp_code = d.ESE_cmp_code)
    
    -- Exclude old created we don't want to see for now
    AND d.ESE_sysmodified &gt; '2020-01-01'</datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>220</seqno><settings /><settingsxml /><stepname>ESE -&gt; EG - Create </stepname></step><step><id>2697</id><entity>Account</entity><action>update</action><source>129</source><target>112</target><datasource>SELECT 1 as notavailableyet</datasource><contentbody></contentbody><mapping></mapping><disable>1</disable><remarks></remarks><replace></replace><seqno>230</seqno><settings>uniquekey=;retryunique=0;</settings><settingsxml><settings><general><gen_datasource_method>2</gen_datasource_method><target_override /><referencekey /><datacolumns><datacolumn><name>cnt_id</name><type>Guid</type></datacolumn><datacolumn><name>cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>MainContact</name><type>Int32</type></datacolumn><datacolumn><name>cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>textfield5</name><type>String</type></datacolumn><datacolumn><name>ESE_cmp_code</name><type>String</type></datacolumn><datacolumn><name>cnt_f_name</name><type>String</type></datacolumn><datacolumn><name>cnt_l_name</name><type>String</type></datacolumn><datacolumn><name>cnt_m_name</name><type>String</type></datacolumn><datacolumn><name>FullName</name><type>String</type></datacolumn><datacolumn><name>Initials</name><type>String</type></datacolumn><datacolumn><name>Gender</name><type>String</type></datacolumn><datacolumn><name>predcode</name><type>String</type></datacolumn><datacolumn><name>cnt_job_desc</name><type>String</type></datacolumn><datacolumn><name>cnt_dept</name><type>String</type></datacolumn><datacolumn><name>taalcode</name><type>String</type></datacolumn><datacolumn><name>cnt_f_ext</name><type>String</type></datacolumn><datacolumn><name>cnt_f_fax</name><type>String</type></datacolumn><datacolumn><name>cnt_f_tel</name><type>String</type></datacolumn><datacolumn><name>cnt_f_mobile</name><type>String</type></datacolumn><datacolumn><name>cnt_email</name><type>String</type></datacolumn><datacolumn><name>ESE_cnt_acc_man</name><type>Int32</type></datacolumn><datacolumn><name>ESE_active</name><type>Byte</type></datacolumn><datacolumn><name>WebAccess</name><type>Byte</type></datacolumn><datacolumn><name>datefield1</name><type>DateTime</type></datacolumn><datacolumn><name>datefield2</name><type>DateTime</type></datacolumn><datacolumn><name>datefield3</name><type>DateTime</type></datacolumn><datacolumn><name>datefield4</name><type>DateTime</type></datacolumn><datacolumn><name>datefield5</name><type>DateTime</type></datacolumn><datacolumn><name>numberfield1</name><type>Double</type></datacolumn><datacolumn><name>numberfield2</name><type>Double</type></datacolumn><datacolumn><name>numberfield3</name><type>Double</type></datacolumn><datacolumn><name>numberfield4</name><type>Double</type></datacolumn><datacolumn><name>numberfield5</name><type>Double</type></datacolumn><datacolumn><name>YesNoField1</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField2</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField3</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField4</name><type>Byte</type></datacolumn><datacolumn><name>YesNoField5</name><type>Byte</type></datacolumn><datacolumn><name>textfield1</name><type>String</type></datacolumn><datacolumn><name>textfield2</name><type>String</type></datacolumn><datacolumn><name>textfield3</name><type>String</type></datacolumn><datacolumn><name>textfield4</name><type>String</type></datacolumn><datacolumn><name>cntp_Directory</name><type>String</type></datacolumn><datacolumn><name>ContactChange</name><type>Boolean</type></datacolumn><datacolumn><name>datemodified</name><type>DateTime</type></datacolumn></datacolumns></general></settings></settingsxml><stepname>ESE -&gt; EG - Diff </stepname></step><step><id>2782</id><entity>Account</entity><action>update</action><source>1</source><target>112</target><datasource>SELECT cmp_wwn, 'B' AS cmp_status, 

CONCAT(ISNULL(cmp_note, '') COLLATE database_default, CONVERT(text,('
[ABEI Synchronisation ' + CONVERT(varchar,GETDATE(),120) + ']
Blocked because division %abeitargetdb% not found in Synergy.'   ))) as cmp_note

from [%abeitargetdb%]..cicmpy with (NOLOCK) 
where cmp_type = 'C' AND cmp_status = 'A'  
and debnr not in (
    select debtor from [%abeisourcedb%]..DivisionDebtors with (NOLOCK) where division = %abeitargetdb% 
) </datasource><contentbody /><mapping /><disable>0</disable><remarks /><replace /><seqno>240</seqno><settings /><settingsxml /><stepname>Block debtors without division</stepname></step><step><id>3609</id><entity>-none-</entity><action>textline</action><source>0</source><target>0</target><datasource></datasource><contentbody></contentbody><mapping></mapping><disable>1</disable><remarks></remarks><replace></replace><seqno>250</seqno><settings></settings><settingsxml /><stepname>Sync pricelist account from 400 &gt; 483</stepname></step><step><id>3610</id><entity>Account</entity><action>update</action><source>107</source><target>126</target><datasource>select c2.cmp_wwn, c2.cmp_code, c.PriceList as Pricelist --,c2.cmp_name, c2.pricelist as pricelist_483, c.pricelist as pricelist_400 
from      [400]..cicmpy c with (NOLOCK)
left join [483]..cicmpy c2 with (NOLOCK) on c2.cmp_code = c.cmp_code
where c2.cmp_status = 'A' and ISNULL(c2.PriceList,'') &lt;&gt; ISNULL(c.pricelist,'') and c.pricelist is not null and c.pricelist &lt;&gt; 'ICL'
</datasource><contentbody></contentbody><mapping></mapping><disable>0</disable><remarks></remarks><replace></replace><seqno>260</seqno><settings>uniquekey=;retryunique=0;</settings><settingsxml><settings><general><gen_datasource_method>0</gen_datasource_method><target_override /><referencekey /><datacolumns><datacolumn><name>cmp_wwn</name><type>Guid</type></datacolumn><datacolumn><name>cmp_code</name><type>String</type></datacolumn><datacolumn><name>Pricelist</name><type>String</type></datacolumn></datacolumns></general></settings></settingsxml><stepname>Sync pricelist 400 - 483</stepname></step></steps></job></jobs>